(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{113:function(t,e,a){t.exports=a(123)},118:function(t,e,a){},119:function(t,e,a){},120:function(t,e,a){},121:function(t,e,a){},122:function(t,e,a){},123:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(56),o=a.n(i),l=a(2),s=a(3),c=a(6),u=a(4),h=a(5),d=a(8),p=a(1),m=function(t,e,a,n){return p.n("#"+t).append("svg").attr("viewBox",n).style("width",e).style("height",a)},f=(a(118),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).ribbonCnt=[],a.handleMouseOver=a.handleMouseOver.bind(Object(d.a)(a)),a.handleMouseOut=a.handleMouseOut.bind(Object(d.a)(a)),a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.id,a=t.width,n=t.height,r=t.pool,i=t.matrix,o=t.color;this.processData();var l,s=.5*Math.min(a,n)-124,c=m(e,a,n,[-a/2,-n/2,a,n]),u=(l=.04,p.c().padAngle(l).sortSubgroups(p.e).sortChords(p.e)),h=function(t){return p.i().radius(t)}(s),d=function(t,e){return p.a().innerRadius(t).outerRadius(e)}(s,s+20),f=u(i);console.log(i),console.log(f.groups);var g=c.append("g").attr("id","segments").selectAll("g").data(f.groups).join("g");g.append("path").attr("fill",(function(t){return o(t.index)})).attr("stroke",(function(t){return o(t.index)})).attr("d",d).on("mouseover",this.handleMouseOver).on("mouseout",this.handleMouseOut),g.selectAll("path").attr("id",(function(t){return r[t.index]})),g.append("text").each((function(t){t.angle=(t.startAngle+t.endAngle)/2})).attr("dy",".35em").attr("transform",(function(t){return"\n                rotate(".concat(180*t.angle/Math.PI-90,")\n                translate(").concat(s+26,")\n                ").concat(t.angle>Math.PI?"rotate(180)":"","\n            ")})).attr("text-anchor",(function(t){return t.angle>Math.PI?"end":null})).text((function(t){return r[t.index]})),c.append("g").attr("id","connects").attr("fill-opacity",.67).selectAll("path").data(f).join("path").attr("fill",(function(t){return o(t.source.index)})).attr("d",h),this.tooltip=this.createTooltip()}},{key:"processData",value:function(){var t=this.props.matrix;this.ribbonCnt=t.reduce((function(t,e,a){return t.push(e.filter((function(t){return 0!==t})).length+t[t.length-1]),t}),[0])}},{key:"createTooltip",value:function(){return p.n("#"+this.props.id).append("div").attr("class","tooltip").style("opacity",0)}},{key:"handleMouseOver",value:function(t,e){var a=this.props,n=a.pool,r=a.mouse;p.n("#segments").selectAll("path").style("opacity",(function(e){return t!==e?.4:1})),p.n("#connects").selectAll("path").style("opacity",(function(e){return e.source.index===t.index?1:.4})),this.tooltip.transition().duration(200).style("opacity",.9),this.tooltip.html(t.value).style("left",p.f.pageX+"px").style("top",p.f.pageY-28+"px"),r("mouseover",n[t.index])}},{key:"handleMouseOut",value:function(t,e){var a=this.props.mouse;p.n("#segments").selectAll("path").style("opacity",1),p.n("#connects").selectAll("path").style("opacity",1),this.tooltip.transition().duration(200).style("opacity",0),a("mouseout")}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,className:"chart"})}}]),e}(n.Component)),g=(a(119),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).margin={top:80,bottom:80,left:150,right:50},a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,a=e.id,n=e.width,r=e.height,i=e.pool;this.processData(),this.svg=m(a,n,r,[0,0,n,r]),this.x=p.k().domain([0,p.g(this.data)]).range([this.margin.left,n-this.margin.right]),this.y=p.j().domain(p.h(this.data.length)).range([this.margin.top,r-this.margin.bottom]).padding(.1),this.yAxis=function(e){return e.attr("transform","translate(".concat(t.margin.left,", 0)")).call(p.b(t.y).tickFormat((function(t){return i[t]})).tickSizeOuter(0))},this.drawBars()}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.pool,a=t.matrix,n=t.hover;this.data=n?a[e.indexOf(n)]:this.rawData,this.updateBars()}},{key:"processData",value:function(){var t=this.props.matrix;this.rawData=t.reduce((function(t,e,a){return t.push(e.reduce((function(t,e){return t+e}),0)),t}),[]),this.data=this.rawData}},{key:"drawBars",value:function(){var t=this,e=this.props.color;this.svg.append("g").attr("id","bars-left").selectAll("rect").data(this.data).enter().append("rect").attr("x",this.x(0)).attr("y",(function(e,a){return t.y(a)})).attr("width",(function(e){return t.x(e)-t.x(0)})).attr("height",this.y.bandwidth()).attr("fill",(function(t,a){return e(a)})),this.svg.append("g").attr("id","bars-right").selectAll("rect").data(this.data).join("rect").attr("x",(function(e){return t.x(e)})).attr("y",(function(e,a){return t.y(a)})).attr("width",0).attr("height",this.y.bandwidth()).attr("fill",(function(t,a){return e(a)})).attr("opacity",.5),this.svg.append("g").attr("class","marker").attr("id","marker-left").attr("fill","black").attr("text-anchor","start").selectAll("text").data(this.data).join("text").attr("x",(function(e){return t.x(e)+5})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})),this.svg.append("g").attr("class","marker").attr("id","marker-right").attr("fill","white").attr("text-anchor","start").selectAll("text").data(this.data).join("text").attr("x",(function(e){return t.x(e)+5})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})).attr("fill-opacity",0),this.svg.append("g").call(this.yAxis)}},{key:"updateBars",value:function(){var t=this,e=this.props.hover;this.svg.select("#bars-left").selectAll("rect").data(this.data).transition().delay(0).duration(500).attr("x",this.x(0)).attr("width",(function(e){return t.x(e)-t.x(0)})),this.svg.select("#bars-right").selectAll("rect").data(this.data).transition().delay(0).duration(500).attr("x",(function(e){return t.x(e)})).attr("width",(function(e,a){return t.x(t.rawData[a])-t.x(e)})),this.svg.select("#marker-right").selectAll("text").attr("fill-opacity",0),e&&(this.svg.select("#marker-right").selectAll("text").data(this.data).attr("x",(function(e){return t.x(e)+2})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})),this.svg.select("#marker-right").selectAll("text").transition().delay(200).attr("fill-opacity",e?1:0))}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,className:"chart"})}}]),e}(n.Component)),b=(a(120),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={loaded:!1,hover:null},a.pool=["MEDCO","DEPUTY MEDCO","GAS","MD","NURSE","MIDWIFE","MTL","OTHER","PROJECT COORDINATOR","NON MEDICAL"],a.pool.sort(),a.color=p.l(p.m),a.handleMouse=a.handleMouse.bind(Object(d.a)(a)),a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;p.d("./asset/MSF_OCP_departures.csv").then((function(e){t.data=e.map((function(t){return{staff_id:t.staff_id,assignment_number:t.assignment_number,departure_date:t.departure_date,return_date:t.return_date,assignment_country:t.assignment_country,pool:t.pool,job_title:t.job_title,age_bracket:t.age_bracket,sex:t.sex,first_departure:t.first_departure}})),t.processData(),t.setState({loaded:!0})}))}},{key:"processData",value:function(){this.matrix=[];for(var t=1;t<this.data.length;t++)if(this.data[t].staff_id===this.data[t-1].staff_id&&this.data[t].pool!==this.data[t-1].pool&&"NA"!==this.data[t].pool&&"NA"!==this.data[t-1].pool){var e=this.pool.indexOf(this.data[t-1].pool),a=this.pool.indexOf(this.data[t].pool);this.matrix[e]||(this.matrix[e]=new Array(this.pool.length).fill(0)),this.matrix[e][a]++}}},{key:"handleMouse",value:function(t,e){var a=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e?a.setState({hover:e}):a.setState({hover:null})}),500)}},{key:"render",value:function(){var t=this.state,e=t.loaded,a=t.hover;return e?r.a.createElement("div",{id:this.props.id},r.a.createElement(f,{id:"chord-chart",width:500,height:500,matrix:this.matrix,pool:this.pool,color:this.color,mouse:this.handleMouse}),r.a.createElement(g,{id:"bar-chart",width:800,height:500,matrix:this.matrix,pool:this.pool,color:this.color,hover:a})):r.a.createElement("div",null)}}]),e}(n.Component)),v=(a(121),function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"content-box"},this.props.children)}}]),e}(n.Component)),y=(a(122),function(t){function e(t){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).call(this,t))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{id:"container"},r.a.createElement(v,null,r.a.createElement("h1",null,"MSF Staff Movement Analysis"),r.a.createElement("p",null,"Mouse over on chord chart arcs to view the changes in bar chart.")),r.a.createElement(b,{id:"dashboard"}),r.a.createElement(v,null,r.a.createElement("h2",null,"Background"),r.a.createElement("p",null,"Me\u0301decins Sans Frontie\u0300res (MSF) delivers lifesaving medical care in over 70 countries. Approximately 10% of MSF\u2019s global workforce is made up of International Staff that perform temporary assignments in MSF\u2019s country projects. Staff build experience at MSF through movement and by working in various pools across the organization. Pools represent international staff that are grouped together by a common profession, skillset or other similarity. This is how MSF divides its large workforce so that it is more manageable. As MSF is a medical organization, the Medical Coordinator (\u2018MedCo\u2019) is one of the most critical coordinator roles in the field. This vis analyses how international staff move from one pool to another, so as to help MSF to allocate assignments, develop new hires and grow staff to become MedCo."),r.a.createElement("h2",null,"Dataset"),r.a.createElement("p",null,"Each row of the dataset is an MSF assignment completed by an international staff. Each assignment item has 10 attributes: staff_id, assignment_number, departure_date, return_date, assignment_country, pool, job_title, age_bracket, sex, first_departure.",r.a.createElement("br",null),"pool is a categorical attribute that can hold the following values:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"MEDCO"),": Medical Coordinator"),r.a.createElement("li",null,r.a.createElement("b",null,"DEPUTY MEDCO"),": Deputy Medical Coordinator, assists the MedCo"),r.a.createElement("li",null,r.a.createElement("b",null,"GAS"),": Gynecology, Anesthesiology, and Surgery medical providers"),r.a.createElement("li",null,r.a.createElement("b",null,"MD"),": Medical doctors other than GAS pool members"),r.a.createElement("li",null,r.a.createElement("b",null,"NURSE"),": Nurse"),r.a.createElement("li",null,r.a.createElement("b",null,"MIDWIFE"),": Midwife or childbirth assistant"),r.a.createElement("li",null,r.a.createElement("b",null,"MTL"),": Medical Team Leader, coordinates medical care at the project level, reports to the MedCo at the country level."),r.a.createElement("li",null,r.a.createElement("b",null,"OTHER"),": Medical professions not included in any other pool"),r.a.createElement("li",null,r.a.createElement("b",null,"PC"),": Project Coordinator, responsible for all non-medical operations at the project level"),r.a.createElement("li",null,r.a.createElement("b",null,"NON MEDICAL"),": staff in other roles that don\u2019t require medical knowledge")),r.a.createElement("h2",null,"Visual Encoding"),r.a.createElement("h3",null,"Chord Chart"),r.a.createElement("li",null,r.a.createElement("b",null,"Marks"),": Areas, Lines"),r.a.createElement("li",null,r.a.createElement("b",null,"Channels"),": Color (Identity Channel), Area / Length (Magnitude Channel)"),r.a.createElement("h3",null,"Bar Chart"),r.a.createElement("li",null,r.a.createElement("b",null,"Marks"),": Lines"),r.a.createElement("li",null,r.a.createElement("b",null,"Channels"),": Color (Identity Channel), Vertical Position (Magnitude Channel)"),r.a.createElement("h2",null,"Queries"),r.a.createElement("ol",null,r.a.createElement("li",null,"How many MSF assignments have be completed by each of the various pools?"),r.a.createElement("li",null,"Which are the major pools that most staff have moved to from a particular pool?"),r.a.createElement("li",null,"Mouse over one particular pool in chord chart and observe the bar chart, what is the number of staff that moved away to each other pools?"),r.a.createElement("li",null,"Observe one particular pool in bar chart and mouse over other pools in chord chart, what is the number of staff that moved from each other pools to this particular pool?"),r.a.createElement("li",null,"What career trajectory MSF staff can follow that gives a high probability to become a MedCo?"))))}}]),e}(n.Component));o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.0b109a27.chunk.js.map