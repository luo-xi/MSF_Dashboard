{"version":3,"sources":["util.js","components/ChordChart/ChordChart.js","components/BarChart/BarChart.js","components/Dashboard/Dashboard.js","components/Description/Description.js","components/container/container.js","index.js"],"names":["createSVG","id","width","height","viewbox","d3","append","attr","style","ChordChart","props","ribbonCnt","handleMouseOver","bind","handleMouseOut","this","pool","matrix","color","processData","padAngle","innerRadius","Math","min","svg","chord","sortSubgroups","sortChords","ribbon","radius","createRibbon","arc","outerRadius","createArc","chords","console","log","groups","group","selectAll","data","join","d","index","on","each","angle","startAngle","endAngle","PI","text","source","tooltip","createTooltip","reduce","acc","arr","i","push","filter","e","length","mouse","transition","duration","html","value","pageX","pageY","className","Component","d3BarChart","margin","top","bottom","left","right","x","domain","range","y","padding","yAxis","g","call","tickFormat","tickSizeOuter","drawBars","hover","indexOf","rawData","updateBars","acc1","e1","acc2","e2","enter","bandwidth","select","delay","Dashboard","state","loaded","sort","handleMouse","then","res","map","staff_id","assignment_number","departure_date","return_date","assignment_country","job_title","age_bracket","sex","first_departure","setState","from","to","Array","fill","type","timer","clearTimeout","setTimeout","Description","children","Container","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.763099dd.chunk.js","sourcesContent":["import * as d3 from 'd3';\n\nexport const createSVG = (id, width, height, viewbox) => {\n    return d3.select(\"#\" + id)\n        .append(\"svg\")\n        .attr(\"viewBox\", viewbox)\n        .style(\"width\", width)\n        .style(\"height\", height);\n}\n\nexport const createChord = (padAngle) => {\n    return d3.chord()\n        .padAngle(padAngle)\n        .sortSubgroups(d3.descending)\n        .sortChords(d3.descending)\n}\n\nexport const createArc = (innerRadius, outerRadius) => {\n    return d3.arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius)\n}\n\nexport const createRibbon = (innerRadius) => {\n    return d3.ribbon()\n        .radius(innerRadius)\n}\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { createChord, createSVG, createRibbon, createArc } from '../../util';\nimport \"./ChordChart.css\";\n\nclass ChordChart extends Component {\n    constructor(props) {\n        super(props);\n        this.ribbonCnt = [];\n        this.handleMouseOver = this.handleMouseOver.bind(this);\n        this.handleMouseOut = this.handleMouseOut.bind(this);\n    }\n\n    componentDidMount() {\n        const { id, width, height, pool, matrix, color } = this.props;\n        this.processData();\n\n        const outerRadius = Math.min(width, height) * 0.5;\n        const innerRadius = outerRadius - 124;\n\n        const svg = createSVG(id, width, height, [-width / 2, -height / 2, width, height]);\n        const chord = createChord(.04);\n        const ribbon = createRibbon(innerRadius);\n        const arc = createArc(innerRadius, innerRadius + 20);\n\n        const chords = chord(matrix);\n        console.log(matrix);\n        console.log(chords.groups);\n        const group = svg.append('g')\n            .attr(\"id\", \"segments\")\n            .selectAll(\"g\")\n            .data(chords.groups)\n            .join(\"g\")\n\n        group.append(\"path\")\n            .attr(\"fill\", d => color(d.index))\n            .attr(\"stroke\", d => color(d.index))\n            .attr(\"d\", arc)\n            .on(\"mouseover\", this.handleMouseOver)\n            .on(\"mouseout\", this.handleMouseOut)\n\n        group.selectAll(\"path\")\n            .attr(\"id\", d => pool[d.index])\n\n        group.append(\"text\")\n            .each(d => { d.angle = (d.startAngle + d.endAngle) / 2; })\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", d => `\n                rotate(${(d.angle * 180 / Math.PI - 90)})\n                translate(${innerRadius + 26})\n                ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n            `)\n            .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n            .text(d => pool[d.index])\n\n        svg.append(\"g\")\n            .attr(\"id\", \"connects\")\n            .attr(\"fill-opacity\", 0.67)\n            .selectAll(\"path\")\n            .data(chords)\n            .join(\"path\")\n            .attr(\"fill\", d => color(d.source.index))\n            .attr(\"d\", ribbon);\n\n        this.tooltip = this.createTooltip();\n    }\n\n    processData() {\n        const { matrix } = this.props;\n        this.ribbonCnt = matrix.reduce((acc, arr, i) => {\n            acc.push(arr.filter((e) => e !== 0).length + acc[acc.length - 1]);\n            return acc;\n        }, [0]);\n    }\n\n    createTooltip() {\n        return d3.select(\"#\" + this.props.id)\n            .append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n    }\n\n    handleMouseOver(d, i) {\n        const { pool, mouse } = this.props;\n\n        d3.select(\"#segments\")\n            .selectAll(\"path\")\n            .style(\"opacity\", (e) => (d !== e) ? 0.4 : 1)\n\n        d3.select(\"#connects\")\n            .selectAll(\"path\")\n            .style(\"opacity\", (e) => (e.source.index === d.index) ? 1 : 0.4)\n\n        this.tooltip.transition()\n            .duration(200)\n            .style(\"opacity\", .9)\n\n        this.tooltip.html(d.value)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\")\n\n        mouse(\"mouseover\", pool[d.index]);\n    }\n\n    handleMouseOut(d, i) {\n        const { mouse } = this.props;\n\n        d3.select(\"#segments\")\n            .selectAll(\"path\")\n            .style(\"opacity\", 1)\n\n        d3.select(\"#connects\")\n            .selectAll(\"path\")\n            .style(\"opacity\", 1)\n\n        this.tooltip.transition()\n            .duration(200)\n            .style(\"opacity\", 0)\n\n        mouse(\"mouseout\");\n    }\n\n    render() {\n        return <div id={this.props.id} className=\"chart\"></div>\n    }\n}\n\nexport default ChordChart;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { createSVG } from '../../util';\nimport \"./BarChart.css\";\n\nclass d3BarChart extends Component {\n    constructor(props) {\n        super(props);\n        this.margin = { top: 80, bottom: 80, left: 150, right: 50 };\n    }\n\n    componentDidMount() {\n        const { id, width, height, pool } = this.props;\n        this.processData();\n\n        this.svg = createSVG(id, width, height, [0, 0, width, height]);\n\n        this.x = d3.scaleLinear()\n            .domain([0, d3.max(this.data)])\n            .range([this.margin.left, width - this.margin.right])\n\n        this.y = d3.scaleBand()\n            .domain(d3.range(this.data.length))\n            .range([this.margin.top, height - this.margin.bottom])\n            .padding(.1)\n\n        this.yAxis = g => g\n            .attr(\"transform\", `translate(${this.margin.left}, 0)`)\n            .call(d3.axisLeft(this.y).tickFormat(i => pool[i]).tickSizeOuter(0))\n\n        this.drawBars();\n    }\n\n    componentDidUpdate() {\n        const { pool, matrix, hover } = this.props;\n        this.data = hover ? matrix[pool.indexOf(hover)] : this.rawData;\n        this.updateBars();\n    }\n\n    processData() {\n        const { matrix } = this.props;\n        this.rawData = matrix.reduce((acc1, e1, i) => {\n            acc1.push(e1.reduce((acc2, e2) => acc2 + e2, 0));\n            return acc1;\n        }, []);\n        this.data = this.rawData;\n    }\n\n    drawBars() {\n        const { color } = this.props;\n        this.svg.append(\"g\")\n            .attr(\"id\", \"bars-left\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", this.x(0))\n            .attr(\"y\", (d, i) => this.y(i))\n            .attr(\"width\", d => this.x(d) - this.x(0))\n            .attr(\"height\", this.y.bandwidth())\n            .attr(\"fill\", (d, i) => color(i))\n\n        this.svg.append(\"g\")\n            .attr(\"id\", \"bars-right\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .join(\"rect\")\n            .attr(\"x\", d => this.x(d))\n            .attr(\"y\", (d, i) => this.y(i))\n            .attr(\"width\", 0)\n            .attr(\"height\", this.y.bandwidth())\n            .attr(\"fill\", (d, i) => color(i))\n            .attr(\"opacity\", .5)\n\n        this.svg.append(\"g\")\n            .attr(\"class\", \"marker\")\n            .attr(\"id\", \"marker-left\")\n            .attr(\"fill\", \"black\")\n            .attr(\"text-anchor\", \"start\")\n            .selectAll(\"text\")\n            .data(this.data)\n            .join(\"text\")\n            .attr(\"x\", d => this.x(d) + 5)\n            .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => d);\n\n        this.svg.append(\"g\")\n            .attr(\"class\", \"marker\")\n            .attr(\"id\", \"marker-right\")\n            .attr(\"fill\", \"white\")\n            .attr(\"text-anchor\", \"start\")\n            .selectAll(\"text\")\n            .data(this.data)\n            .join(\"text\")\n            .attr(\"x\", d => this.x(d) + 5)\n            .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => d)\n            .attr(\"fill-opacity\", 0)\n\n        this.svg.append(\"g\")\n            .call(this.yAxis);\n    }\n\n    updateBars() {\n        const { hover } = this.props;\n        this.svg.select(\"#bars-left\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .transition()\n            .delay(0)\n            .duration(500)\n            .attr(\"x\", this.x(0))\n            .attr(\"width\", d => this.x(d) - this.x(0))\n\n        this.svg.select(\"#bars-right\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .transition()\n            .delay(0)\n            .duration(500)\n            .attr(\"x\", d => this.x(d))\n            .attr(\"width\", (d, i) => this.x(this.rawData[i]) - this.x(d))\n\n        this.svg.select(\"#marker-right\")\n            .selectAll(\"text\")\n            .attr(\"fill-opacity\", 0)\n\n        if (hover) {\n            this.svg.select(\"#marker-right\")\n                .selectAll(\"text\")\n                .data(this.data)\n                .attr(\"x\", d => this.x(d) + 2)\n                .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n                .attr(\"dy\", \"0.35em\")\n                .text(d => d)\n\n            this.svg.select(\"#marker-right\")\n                .selectAll(\"text\")\n                .transition()\n                .delay(200)\n                .attr(\"fill-opacity\", hover? 1: 0)\n        }\n    }\n\n    render() {\n        return <div id={this.props.id} className=\"chart\"></div>\n    }\n}\n\nexport default d3BarChart;","import React, { Component } from 'react';\nimport ChordChart from '../ChordChart/ChordChart';\nimport BarChart from '../BarChart/BarChart';\nimport * as d3 from 'd3';\nimport \"./Dashboard.css\";\n\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { loaded: false, hover: null };\n        this.pool = [\"MEDCO\", \"DEPUTY MEDCO\", \"GAS\", \"MD\", \"NURSE\", \"MIDWIFE\", \"MTL\", \"OTHER\", \"PROJECT COORDINATOR\", \"NON MEDICAL\"];\n        this.pool.sort();\n        this.color = d3.scaleOrdinal(d3.schemeCategory10);\n        this.handleMouse = this.handleMouse.bind(this);\n    }\n\n    componentDidMount() {\n        d3.csv(\"./asset/MSF_OCP_departures.csv\")\n            .then((res) => {\n                this.data = res.map((d) => {\n                    return {\n                        staff_id: d.staff_id,\n                        assignment_number: d.assignment_number,\n                        departure_date: d.departure_date,\n                        return_date: d.return_date,\n                        assignment_country: d.assignment_country,\n                        pool: d.pool,\n                        job_title: d.job_title,\n                        age_bracket: d.age_bracket,\n                        sex: d.sex,\n                        first_departure: d.first_departure\n                    };\n                });\n\n                this.processData();\n                this.setState({ loaded: true });\n            });\n    }\n\n    processData(){\n        this.matrix = [];\n        for (let i = 1; i < this.data.length; i++) {\n            if (this.data[i].staff_id === this.data[i - 1].staff_id && this.data[i].pool !== this.data[i - 1].pool && this.data[i].pool !== \"NA\" && this.data[i - 1].pool !== \"NA\") {\n                const from = this.pool.indexOf(this.data[i - 1].pool);\n                const to = this.pool.indexOf(this.data[i].pool);\n                if (!this.matrix[from]) this.matrix[from] = new Array(this.pool.length).fill(0);\n                this.matrix[from][to]++;\n            }\n        }\n    }\n\n    handleMouse(type, id){\n        if(this.timer) clearTimeout(this.timer);\n        this.timer = setTimeout(\n            () => {\n                if(id){\n                    this.setState({ hover: id });\n                }else{\n                    this.setState({ hover: null });\n                }\n            }\n        , 500);\n    }\n\n    render() {\n        const { loaded, hover} = this.state;\n        return (\n            loaded ?\n                <div id={this.props.id}>\n                    <ChordChart id={\"chord-chart\"} width={500} height={500} matrix={this.matrix} pool={this.pool} color={this.color} mouse={this.handleMouse} />\n                    <BarChart id={\"bar-chart\"} width={800} height={500} matrix={this.matrix} pool={this.pool} color={this.color} hover={hover}/>\n\n                </div>\n                : <div></div>\n        );\n    }\n}\n\nexport default Dashboard;","import React, { Component } from 'react';\nimport './Description.css';\n\nclass Description extends Component {\n    render() {\n        return (\n            <div className=\"content-box\">\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default Description;","import React, { Component } from 'react';\nimport Dashboard from '../Dashboard/Dashboard';\nimport Description from '../Description/Description';\nimport './container.css';\n\nclass Container extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n\n    }\n\n    render() {\n        return (\n            <div id=\"container\">\n                <Description>\n                    <h1>MSF Staff Movement Analysis</h1>\n                    <p>\n                        Mouse over on chord chart arcs to view the changes in bar chart.\n                    </p>\n                </Description>\n                <Dashboard id=\"dashboard\" />\n                <Description>\n                    <h2>Background</h2>\n                    <p>\n                        Médecins Sans Frontières (MSF) delivers lifesaving medical care in over 70 countries.\n                        Approximately 10% of MSF’s global workforce is made up of International Staff that perform temporary assignments in MSF’s country projects.\n                        Staff build experience at MSF through movement and by working in various pools across the organization.\n                        Pools represent international staff that are grouped together by a common profession, skillset or other similarity.\n                        This is how MSF divides its large workforce so that it is more manageable.\n                        As MSF is a medical organization, the Medical Coordinator (‘MedCo’) is one of the most critical coordinator roles in the field.\n                        This vis analyses how international staff move from one pool to another, so as to help MSF to allocate assignments, develop new hires and grow staff to become MedCo.\n                    </p>\n                    <h2>Dataset</h2>\n                    <p>\n                        Each row of the dataset is an MSF assignment completed by an international staff.\n                        Each assignment item has 10 attributes: staff_id, assignment_number, departure_date, return_date, assignment_country, pool, job_title, age_bracket, sex, first_departure.\n                        <br></br>\n                        pool is a categorical attribute that can hold the following values:\n                    </p>\n                    <ul>\n                        <li><b>MEDCO</b>: Medical Coordinator</li>\n                        <li><b>DEPUTY MEDCO</b>: Deputy Medical Coordinator, assists the MedCo</li>\n                        <li><b>GAS</b>: Gynecology, Anesthesiology, and Surgery medical providers</li>\n                        <li><b>MD</b>: Medical doctors other than GAS pool members</li>\n                        <li><b>NURSE</b>: Nurse</li>\n                        <li><b>MIDWIFE</b>: Midwife or childbirth assistant</li>\n                        <li><b>MTL</b>: Medical Team Leader, coordinates medical care at the project level, reports to the MedCo at the country level.</li>\n                        <li><b>OTHER</b>: Medical professions not included in any other pool</li>\n                        <li><b>PC</b>: Project Coordinator, responsible for all non-medical operations at the project level</li>\n                        <li><b>NON MEDICAL</b>: staff in other roles that don’t require medical knowledge</li>\n                    </ul>\n                    <h2>Visual Encoding</h2>\n                    <h3>Chord Chart</h3>\n                    <li><b>Marks</b>: Areas, Lines</li>\n                    <li><b>Channels</b>: Color (Identity Channel), Area / Length (Magnitude Channel)</li>\n                    <h3>Bar Chart</h3>\n                    <li><b>Marks</b>: Lines</li>\n                    <li><b>Channels</b>: Color (Identity Channel), Horizontal Position (Magnitude Channel)</li>\n                    <h2>Queries</h2>\n                    <ol>\n                        <li>How many MSF assignments have be completed by each of the various pools?</li>\n                        <li>Which are the major pools that most staff have moved to from a particular pool?</li>\n                        <li>Mouse over one particular pool in chord chart and observe the bar chart, what is the number of staff that moved away to each other pools?</li>\n                        <li>Observe one particular pool in bar chart and mouse over other pools in chord chart, what is the number of staff that moved from each other pools to this particular pool?</li>\n                        <li>What career trajectory MSF staff can follow that gives a high probability to become a MedCo?</li>\n                    </ol>\n                </Description>\n            </div>\n        )\n    }\n}\n\nexport default Container;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Container from './components/container/container';\n\nReactDOM.render(<Container />, document.getElementById('root'));\n\n"],"sourceRoot":""}