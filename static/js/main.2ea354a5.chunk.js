(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{113:function(t,e,a){t.exports=a(121)},118:function(t,e,a){},119:function(t,e,a){},120:function(t,e,a){},121:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(56),o=a.n(i),s=a(2),l=a(3),c=a(6),u=a(4),h=a(5),d=a(8),p=a(0),f=function(t,e,a,n){return p.n("#"+t).append("svg").attr("viewBox",n).style("width",e).style("height",a)},m=(a(118),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).ribbonCnt=[],a.handleMouseOver=a.handleMouseOver.bind(Object(d.a)(a)),a.handleMouseOut=a.handleMouseOut.bind(Object(d.a)(a)),a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.id,a=t.width,n=t.height,r=t.pool,i=t.matrix,o=t.color;this.processData();var s,l=.5*Math.min(a,n)-124,c=f(e,a,n,[-a/2,-n/2,a,n]),u=(s=.04,p.c().padAngle(s).sortSubgroups(p.e).sortChords(p.e)),h=function(t){return p.i().radius(t)}(l),d=function(t,e){return p.a().innerRadius(t).outerRadius(e)}(l,l+20),m=u(i),g=c.append("g").attr("id","segments").selectAll("g").data(m.groups).join("g");g.append("path").attr("fill",(function(t){return o(t.index)})).attr("stroke",(function(t){return o(t.index)})).attr("d",d).on("mouseover",this.handleMouseOver).on("mouseout",this.handleMouseOut),g.selectAll("path").attr("id",(function(t){return r[t.index]})),g.append("text").each((function(t){t.angle=(t.startAngle+t.endAngle)/2})).attr("dy",".35em").attr("transform",(function(t){return"\n                rotate(".concat(180*t.angle/Math.PI-90,")\n                translate(").concat(l+26,")\n                ").concat(t.angle>Math.PI?"rotate(180)":"","\n            ")})).attr("text-anchor",(function(t){return t.angle>Math.PI?"end":null})).text((function(t){return r[t.index]})),c.append("g").attr("id","connects").attr("fill-opacity",.67).selectAll("path").data(m).join("path").attr("fill",(function(t){return o(t.source.index)})).attr("d",h),this.tooltip=this.createTooltip()}},{key:"processData",value:function(){var t=this.props.matrix;this.ribbonCnt=t.reduce((function(t,e,a){return t.push(e.filter((function(t){return 0!==t})).length+t[t.length-1]),t}),[0])}},{key:"createTooltip",value:function(){return p.n("#"+this.props.id).append("div").attr("class","tooltip").style("opacity",0)}},{key:"handleMouseOver",value:function(t,e){var a=this.props,n=a.pool,r=a.mouse;p.n("#segments").selectAll("path").style("opacity",(function(e){return t!==e?.4:1})),p.n("#connects").selectAll("path").style("opacity",(function(e){return e.source.index===t.index?1:.4})),this.tooltip.transition().duration(200).style("opacity",.9),this.tooltip.html(t.value).style("left",p.f.pageX+"px").style("top",p.f.pageY-28+"px"),r("mouseover",n[t.index])}},{key:"handleMouseOut",value:function(t,e){var a=this.props.mouse;p.n("#segments").selectAll("path").style("opacity",1),p.n("#connects").selectAll("path").style("opacity",1),this.tooltip.transition().duration(200).style("opacity",0),a("mouseout")}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,className:"chart"})}}]),e}(n.Component)),g=(a(119),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).margin={top:80,bottom:80,left:150,right:50},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,a=e.id,n=e.width,r=e.height,i=e.pool;this.processData(),this.svg=f(a,n,r,[0,0,n,r]),this.x=p.k().domain([0,p.g(this.data)]).range([this.margin.left,n-this.margin.right]),this.y=p.j().domain(p.h(this.data.length)).range([this.margin.top,r-this.margin.bottom]).padding(.1),this.yAxis=function(e){return e.attr("transform","translate(".concat(t.margin.left,", 0)")).call(p.b(t.y).tickFormat((function(t){return i[t]})).tickSizeOuter(0))},this.drawBars()}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.pool,a=t.matrix,n=t.hover;this.data=n?a[e.indexOf(n)]:this.rawData,this.updateBars()}},{key:"processData",value:function(){var t=this.props.matrix;this.rawData=t.reduce((function(t,e,a){return t.push(e.reduce((function(t,e){return t+e}),0)),t}),[]),this.data=this.rawData}},{key:"drawBars",value:function(){var t=this,e=this.props.color;this.svg.append("g").attr("id","bars-left").selectAll("rect").data(this.data).enter().append("rect").attr("x",this.x(0)).attr("y",(function(e,a){return t.y(a)})).attr("width",(function(e){return t.x(e)-t.x(0)})).attr("height",this.y.bandwidth()).attr("fill",(function(t,a){return e(a)})),this.svg.append("g").attr("id","bars-right").selectAll("rect").data(this.data).join("rect").attr("x",(function(e){return t.x(e)})).attr("y",(function(e,a){return t.y(a)})).attr("width",0).attr("height",this.y.bandwidth()).attr("fill",(function(t,a){return e(a)})).attr("opacity",.5),this.svg.append("g").attr("class","marker").attr("id","marker-left").attr("fill","black").attr("text-anchor","start").selectAll("text").data(this.data).join("text").attr("x",(function(e){return t.x(e)+5})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})),this.svg.append("g").attr("class","marker").attr("id","marker-right").attr("fill","white").attr("text-anchor","start").selectAll("text").data(this.data).join("text").attr("x",(function(e){return t.x(e)+5})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})).attr("fill-opacity",0),this.svg.append("g").call(this.yAxis)}},{key:"updateBars",value:function(){var t=this,e=this.props.hover;this.svg.select("#bars-left").selectAll("rect").data(this.data).transition().delay(0).duration(1e3).attr("x",this.x(0)).attr("width",(function(e){return t.x(e)-t.x(0)})),this.svg.select("#bars-right").selectAll("rect").data(this.data).transition().delay(0).duration(1e3).attr("x",(function(e){return t.x(e)})).attr("width",(function(e,a){return t.x(t.rawData[a])-t.x(e)})),this.svg.select("#marker-right").selectAll("text").attr("fill-opacity",0),e&&(this.svg.select("#marker-right").selectAll("text").data(this.data).attr("x",(function(e){return t.x(e)+2})).attr("y",(function(e,a){return t.y(a)+t.y.bandwidth()/2})).attr("dy","0.35em").text((function(t){return t})),this.svg.select("#marker-right").selectAll("text").transition().delay(1e3).attr("fill-opacity",e?1:0))}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,className:"chart"})}}]),e}(n.Component)),y=(a(120),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={loaded:!1,hover:null},a.pool=["MEDCO","DEPUTY MEDCO","GAS","MD","NURSE","MIDWIFE","MTL","OTHER","PROJECT COORDINATOR","NON MEDICAL"],a.pool.sort(),a.color=p.l(p.m),a.handleMouse=a.handleMouse.bind(Object(d.a)(a)),a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;p.d("./asset/MSF_OCP_departures.csv").then((function(e){t.data=e.map((function(t){return{staff_id:t.staff_id,assignment_number:t.assignment_number,departure_date:t.departure_date,return_date:t.return_date,assignment_country:t.assignment_country,pool:t.pool,job_title:t.job_title,age_bracket:t.age_bracket,sex:t.sex,first_departure:t.first_departure}})),t.processData(),t.setState({loaded:!0})}))}},{key:"processData",value:function(){this.matrix=[];for(var t=1;t<this.data.length;t++)if(this.data[t].staff_id===this.data[t-1].staff_id&&this.data[t].pool!==this.data[t-1].pool&&"NA"!==this.data[t].pool&&"NA"!==this.data[t-1].pool){var e=this.pool.indexOf(this.data[t-1].pool),a=this.pool.indexOf(this.data[t].pool);this.matrix[e]||(this.matrix[e]=new Array(this.pool.length).fill(0)),this.matrix[e][a]++}}},{key:"handleMouse",value:function(t,e){var a=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e?a.setState({hover:e}):a.setState({hover:null})}),500)}},{key:"render",value:function(){var t=this.state,e=t.loaded,a=t.hover;return e?r.a.createElement("div",{id:this.props.id},r.a.createElement(m,{id:"chord-chart",width:500,height:500,matrix:this.matrix,pool:this.pool,color:this.color,mouse:this.handleMouse}),r.a.createElement(g,{id:"bar-chart",width:800,height:500,matrix:this.matrix,pool:this.pool,color:this.color,hover:a})):r.a.createElement("div",null)}}]),e}(n.Component)),v=function(t){function e(t){return Object(s.a)(this,e),Object(c.a)(this,Object(u.a)(e).call(this,t))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(y,{id:"dashboard"})}}]),e}(n.Component);o.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.2ea354a5.chunk.js.map