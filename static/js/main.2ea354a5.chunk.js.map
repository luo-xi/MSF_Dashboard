{"version":3,"sources":["util.js","components/ChordChart/ChordChart.js","components/BarChart/BarChart.js","components/Dashboard/Dashboard.js","components/container/container.js","index.js"],"names":["createSVG","id","width","height","viewbox","d3","append","attr","style","ChordChart","props","ribbonCnt","handleMouseOver","bind","handleMouseOut","this","pool","matrix","color","processData","padAngle","innerRadius","Math","min","svg","chord","sortSubgroups","sortChords","ribbon","radius","createRibbon","arc","outerRadius","createArc","chords","group","selectAll","data","groups","join","d","index","on","each","angle","startAngle","endAngle","PI","text","source","tooltip","createTooltip","reduce","acc","arr","i","push","filter","e","length","mouse","transition","duration","html","value","pageX","pageY","className","Component","d3BarChart","margin","top","bottom","left","right","x","domain","range","y","padding","yAxis","g","call","tickFormat","tickSizeOuter","drawBars","hover","indexOf","rawData","updateBars","acc1","e1","acc2","e2","enter","bandwidth","select","delay","Dashboard","state","loaded","sort","handleMouse","then","res","map","staff_id","assignment_number","departure_date","return_date","assignment_country","job_title","age_bracket","sex","first_departure","setState","from","to","Array","fill","type","timer","clearTimeout","setTimeout","Container","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ea354a5.chunk.js","sourcesContent":["import * as d3 from 'd3';\n\nexport const createSVG = (id, width, height, viewbox) => {\n    return d3.select(\"#\" + id)\n        .append(\"svg\")\n        .attr(\"viewBox\", viewbox)\n        .style(\"width\", width)\n        .style(\"height\", height);\n}\n\nexport const createChord = (padAngle) => {\n    return d3.chord()\n        .padAngle(padAngle)\n        .sortSubgroups(d3.descending)\n        .sortChords(d3.descending)\n}\n\nexport const createArc = (innerRadius, outerRadius) => {\n    return d3.arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius)\n}\n\nexport const createRibbon = (innerRadius) => {\n    return d3.ribbon()\n        .radius(innerRadius)\n}\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { createChord, createSVG, createRibbon, createArc } from '../../util';\nimport \"./ChordChart.css\";\n\nclass ChordChart extends Component {\n    constructor(props) {\n        super(props);\n        this.ribbonCnt = [];\n        this.handleMouseOver = this.handleMouseOver.bind(this);\n        this.handleMouseOut = this.handleMouseOut.bind(this);\n    }\n\n    componentDidMount() {\n        const { id, width, height, pool, matrix, color } = this.props;\n        this.processData();\n\n        const outerRadius = Math.min(width, height) * 0.5;\n        const innerRadius = outerRadius - 124;\n\n        const svg = createSVG(id, width, height, [-width / 2, -height / 2, width, height]);\n        const chord = createChord(.04);\n        const ribbon = createRibbon(innerRadius);\n        const arc = createArc(innerRadius, innerRadius + 20);\n\n        const chords = chord(matrix);\n        const group = svg.append('g')\n            .attr(\"id\", \"segments\")\n            .selectAll(\"g\")\n            .data(chords.groups)\n            .join(\"g\")\n\n        group.append(\"path\")\n            .attr(\"fill\", d => color(d.index))\n            .attr(\"stroke\", d => color(d.index))\n            .attr(\"d\", arc)\n            .on(\"mouseover\", this.handleMouseOver)\n            .on(\"mouseout\", this.handleMouseOut)\n\n        group.selectAll(\"path\")\n            .attr(\"id\", d => pool[d.index])\n\n        group.append(\"text\")\n            .each(d => { d.angle = (d.startAngle + d.endAngle) / 2; })\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", d => `\n                rotate(${(d.angle * 180 / Math.PI - 90)})\n                translate(${innerRadius + 26})\n                ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n            `)\n            .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n            .text(d => pool[d.index])\n\n        svg.append(\"g\")\n            .attr(\"id\", \"connects\")\n            .attr(\"fill-opacity\", 0.67)\n            .selectAll(\"path\")\n            .data(chords)\n            .join(\"path\")\n            .attr(\"fill\", d => color(d.source.index))\n            .attr(\"d\", ribbon);\n\n        this.tooltip = this.createTooltip();\n    }\n\n    processData() {\n        const { matrix } = this.props;\n        this.ribbonCnt = matrix.reduce((acc, arr, i) => {\n            acc.push(arr.filter((e) => e !== 0).length + acc[acc.length - 1]);\n            return acc;\n        }, [0]);\n    }\n\n    createTooltip() {\n        return d3.select(\"#\" + this.props.id)\n            .append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n    }\n\n    handleMouseOver(d, i) {\n        const { pool, mouse } = this.props;\n\n        d3.select(\"#segments\")\n            .selectAll(\"path\")\n            .style(\"opacity\", (e) => (d !== e) ? 0.4 : 1)\n\n        d3.select(\"#connects\")\n            .selectAll(\"path\")\n            .style(\"opacity\", (e) => (e.source.index === d.index) ? 1 : 0.4)\n\n        this.tooltip.transition()\n            .duration(200)\n            .style(\"opacity\", .9)\n\n        this.tooltip.html(d.value)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\")\n\n        mouse(\"mouseover\", pool[d.index]);\n    }\n\n    handleMouseOut(d, i) {\n        const { mouse } = this.props;\n\n        d3.select(\"#segments\")\n            .selectAll(\"path\")\n            .style(\"opacity\", 1)\n\n        d3.select(\"#connects\")\n            .selectAll(\"path\")\n            .style(\"opacity\", 1)\n\n        this.tooltip.transition()\n            .duration(200)\n            .style(\"opacity\", 0)\n\n        mouse(\"mouseout\");\n    }\n\n    render() {\n        return <div id={this.props.id} className=\"chart\"></div>\n    }\n}\n\nexport default ChordChart;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { createSVG } from '../../util';\nimport \"./BarChart.css\";\n\nclass d3BarChart extends Component {\n    constructor(props) {\n        super(props);\n        this.margin = { top: 80, bottom: 80, left: 150, right: 50 };\n    }\n\n    componentDidMount() {\n        const { id, width, height, pool } = this.props;\n        this.processData();\n\n        this.svg = createSVG(id, width, height, [0, 0, width, height]);\n\n        this.x = d3.scaleLinear()\n            .domain([0, d3.max(this.data)])\n            .range([this.margin.left, width - this.margin.right])\n\n        this.y = d3.scaleBand()\n            .domain(d3.range(this.data.length))\n            .range([this.margin.top, height - this.margin.bottom])\n            .padding(.1)\n\n        this.yAxis = g => g\n            .attr(\"transform\", `translate(${this.margin.left}, 0)`)\n            .call(d3.axisLeft(this.y).tickFormat(i => pool[i]).tickSizeOuter(0))\n\n        this.drawBars();\n    }\n\n    componentDidUpdate() {\n        const { pool, matrix, hover } = this.props;\n        this.data = hover ? matrix[pool.indexOf(hover)] : this.rawData;\n        this.updateBars();\n    }\n\n    processData() {\n        const { matrix } = this.props;\n        this.rawData = matrix.reduce((acc1, e1, i) => {\n            acc1.push(e1.reduce((acc2, e2) => acc2 + e2, 0));\n            return acc1;\n        }, []);\n        this.data = this.rawData;\n    }\n\n    drawBars() {\n        const { color } = this.props;\n        this.svg.append(\"g\")\n            .attr(\"id\", \"bars-left\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", this.x(0))\n            .attr(\"y\", (d, i) => this.y(i))\n            .attr(\"width\", d => this.x(d) - this.x(0))\n            .attr(\"height\", this.y.bandwidth())\n            .attr(\"fill\", (d, i) => color(i))\n\n        this.svg.append(\"g\")\n            .attr(\"id\", \"bars-right\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .join(\"rect\")\n            .attr(\"x\", d => this.x(d))\n            .attr(\"y\", (d, i) => this.y(i))\n            .attr(\"width\", 0)\n            .attr(\"height\", this.y.bandwidth())\n            .attr(\"fill\", (d, i) => color(i))\n            .attr(\"opacity\", .5)\n\n        this.svg.append(\"g\")\n            .attr(\"class\", \"marker\")\n            .attr(\"id\", \"marker-left\")\n            .attr(\"fill\", \"black\")\n            .attr(\"text-anchor\", \"start\")\n            .selectAll(\"text\")\n            .data(this.data)\n            .join(\"text\")\n            .attr(\"x\", d => this.x(d) + 5)\n            .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => d);\n\n        this.svg.append(\"g\")\n            .attr(\"class\", \"marker\")\n            .attr(\"id\", \"marker-right\")\n            .attr(\"fill\", \"white\")\n            .attr(\"text-anchor\", \"start\")\n            .selectAll(\"text\")\n            .data(this.data)\n            .join(\"text\")\n            .attr(\"x\", d => this.x(d) + 5)\n            .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => d)\n            .attr(\"fill-opacity\", 0)\n\n        this.svg.append(\"g\")\n            .call(this.yAxis);\n    }\n\n    updateBars() {\n        const { hover } = this.props;\n        this.svg.select(\"#bars-left\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .transition()\n            .delay(0)\n            .duration(1000)\n            .attr(\"x\", this.x(0))\n            .attr(\"width\", d => this.x(d) - this.x(0))\n\n        this.svg.select(\"#bars-right\")\n            .selectAll(\"rect\")\n            .data(this.data)\n            .transition()\n            .delay(0)\n            .duration(1000)\n            .attr(\"x\", d => this.x(d))\n            .attr(\"width\", (d, i) => this.x(this.rawData[i]) - this.x(d))\n\n        this.svg.select(\"#marker-right\")\n            .selectAll(\"text\")\n            .attr(\"fill-opacity\", 0)\n\n        if (hover) {\n            this.svg.select(\"#marker-right\")\n                .selectAll(\"text\")\n                .data(this.data)\n                .attr(\"x\", d => this.x(d) + 2)\n                .attr(\"y\", (d, i) => this.y(i) + this.y.bandwidth() / 2)\n                .attr(\"dy\", \"0.35em\")\n                .text(d => d)\n\n            this.svg.select(\"#marker-right\")\n                .selectAll(\"text\")\n                .transition()\n                .delay(1000)\n                .attr(\"fill-opacity\", hover? 1: 0)\n        }\n    }\n\n    render() {\n        return <div id={this.props.id} className=\"chart\"></div>\n    }\n}\n\nexport default d3BarChart;","import React, { Component } from 'react';\nimport ChordChart from '../ChordChart/ChordChart';\nimport BarChart from '../BarChart/BarChart';\nimport * as d3 from 'd3';\nimport \"./Dashboard.css\";\n\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { loaded: false, hover: null };\n        this.pool = [\"MEDCO\", \"DEPUTY MEDCO\", \"GAS\", \"MD\", \"NURSE\", \"MIDWIFE\", \"MTL\", \"OTHER\", \"PROJECT COORDINATOR\", \"NON MEDICAL\"];\n        this.pool.sort();\n        this.color = d3.scaleOrdinal(d3.schemeCategory10);\n        this.handleMouse = this.handleMouse.bind(this);\n    }\n\n    componentDidMount() {\n        d3.csv(\"./asset/MSF_OCP_departures.csv\")\n            .then((res) => {\n                this.data = res.map((d) => {\n                    return {\n                        staff_id: d.staff_id,\n                        assignment_number: d.assignment_number,\n                        departure_date: d.departure_date,\n                        return_date: d.return_date,\n                        assignment_country: d.assignment_country,\n                        pool: d.pool,\n                        job_title: d.job_title,\n                        age_bracket: d.age_bracket,\n                        sex: d.sex,\n                        first_departure: d.first_departure\n                    };\n                });\n\n                this.processData();\n                this.setState({ loaded: true });\n            });\n    }\n\n    processData(){\n        this.matrix = [];\n        for (let i = 1; i < this.data.length; i++) {\n            if (this.data[i].staff_id === this.data[i - 1].staff_id && this.data[i].pool !== this.data[i - 1].pool && this.data[i].pool !== \"NA\" && this.data[i - 1].pool !== \"NA\") {\n                const from = this.pool.indexOf(this.data[i - 1].pool);\n                const to = this.pool.indexOf(this.data[i].pool);\n                if (!this.matrix[from]) this.matrix[from] = new Array(this.pool.length).fill(0);\n                this.matrix[from][to]++;\n            }\n        }\n    }\n\n    handleMouse(type, id){\n        if(this.timer) clearTimeout(this.timer);\n        this.timer = setTimeout(\n            () => {\n                if(id){\n                    this.setState({ hover: id });\n                }else{\n                    this.setState({ hover: null });\n                }\n            }\n        , 500);\n    }\n\n    render() {\n        const { loaded, hover} = this.state;\n        return (\n            loaded ?\n                <div id={this.props.id}>\n                    <ChordChart id={\"chord-chart\"} width={500} height={500} matrix={this.matrix} pool={this.pool} color={this.color} mouse={this.handleMouse} />\n                    <BarChart id={\"bar-chart\"} width={800} height={500} matrix={this.matrix} pool={this.pool} color={this.color} hover={hover}/>\n\n                </div>\n                : <div></div>\n        );\n    }\n}\n\nexport default Dashboard;","import React, { Component } from 'react';\nimport Dashboard from '../Dashboard/Dashboard';\n\nclass Container extends Component{\n    constructor(props){\n        super(props);\n    }\n\n    componentDidMount(){\n\n    }\n\n    render(){\n        return (\n            <Dashboard id=\"dashboard\"/>\n        )\n    }\n}\n\nexport default Container;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Container from './components/container/container';\n\nReactDOM.render(<Container />, document.getElementById('root'));\n\n"],"sourceRoot":""}